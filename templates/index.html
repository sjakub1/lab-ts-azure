<!doctype html>
<html>
  <head>
    <title>Bud≈ºet domowy</title>
    <style>
      body {
        font-family: Arial;
        margin: 30px;
      }
      table {
        border-collapse: collapse;
        width: 60%;
      }
      th,
      td {
        border: 1px solid #ccc;
        padding: 8px;
      }
      .balance {
        margin-top: 20px;
        font-weight: bold;
      }
      a {
        margin-right: 10px;
      }
    </style>
  </head>
  <body>
    <h1>≈öledzenie bud≈ºetu domowego</h1>

    <a href="{{ url_for('add') }}">‚ûï Dodaj transakcjƒô</a>

    <table>
      <tr>
        <th>Typ</th>
        <th>Opis</th>
        <th>Kwota</th>
      </tr>
      {% for t in transactions %}
      <tr>
        <td>{{ 'Przych√≥d' if t.type == 'income' else 'Wydatek' }}</td>
        <td>{{ t.description }}</td>
        <td>{{ t.amount }} z≈Ç</td>
      </tr>
      {% endfor %}
    </table>

    <div class="balance">
      <p>üí∞ Suma przychod√≥w: {{ total_income }} z≈Ç</p>
      <p>üí∏ Suma wydatk√≥w: {{ total_expense }} z≈Ç</p>
      <p>üìä Bilans: {{ balance }} z≈Ç</p>
    </div>

    <form method="post" action="{{ url_for('export') }}" style="margin: 15px 0">
      <label for="filename">Nazwa pliku CSV:</label>
      <input
        id="filename"
        name="filename"
        type="text"
        placeholder="np. transakcje-styczen.csv"
        style="margin: 0 10px; width: 240px"
      />
      <button type="submit">‚¨áÔ∏è Eksportuj do Blob (CSV)</button>
    </form>

    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %}
    <ul style="padding-left: 18px">
      {% for category, message in messages %}
      <li style="color: {{ 'green' if category == 'success' else 'red' }};">
        {{ message }}
      </li>
      {% endfor %}
    </ul>
    {% endif %} {% endwith %}
  </body>
</html>
